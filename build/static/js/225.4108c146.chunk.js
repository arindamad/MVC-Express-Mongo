"use strict";(self.webpackChunk_transcon_admin_react=self.webpackChunk_transcon_admin_react||[]).push([[225],{36225:function(e,t,n){n.r(t);var a=n(1413),r=n(93433),o=n(29439),s=n(78983),l=n(72791),c=n(76699),i=n(72010),d=(n(51802),n(25646),n(24846)),u=n(55068),m=n(98030),h=(n(31110),n(9085)),p=n(57689),f=(n(30146),n(80184));t.default=function(){var e,t=(0,p.s0)(),n=(0,l.useState)({}),x=(0,o.Z)(n,2),j=x[0],g=x[1],b=(0,l.useState)([]),v=(0,o.Z)(b,2),S=v[0],_=v[1],y=(0,l.useState)(!1),N=(0,o.Z)(y,2),P=(N[0],N[1],(0,l.useState)([])),Z=(0,o.Z)(P,2),O=(Z[0],Z[1],(0,l.useState)("")),w=(0,o.Z)(O,2),T=(w[0],w[1],(0,l.useState)("")),C=(0,o.Z)(T,2),I=(C[0],C[1],(0,l.useState)([])),k=(0,o.Z)(I,2),E=k[0],F=k[1],J=(0,l.useState)([]),A=(0,o.Z)(J,2),D=(A[0],A[1]),G=(0,l.useState)({}),R=(0,o.Z)(G,2),B=R[0],V=R[1],X=(0,l.useState)([]),H=(0,o.Z)(X,2),L=(H[0],H[1],(0,l.useState)([])),U=(0,o.Z)(L,2),q=U[0],z=U[1],K=(0,l.useState)([]),M=(0,o.Z)(K,2),Q=M[0],W=M[1],Y=(0,l.useState)([]),$=(0,o.Z)(Y,2),ee=$[0],te=$[1],ne=(0,l.useState)({}),ae=(0,o.Z)(ne,2),re=ae[0],oe=ae[1],se=(0,l.useState)(!0),le=(0,o.Z)(se,2),ce=le[0],ie=le[1];(0,l.useEffect)((function(){fetch("https://admin.transconsolution.net/api/product/list",{method:"POST",redirect:"follow"}).then((function(e){return e.json()})).then((function(e){z(e.data)})).catch((function(e){return console.log("error",e)}))}),[]);var de=(0,l.useState)((function(){return i.EditorState.createEmpty()})),ue=(0,o.Z)(de,2);ue[0],ue[1];(0,l.useEffect)((function(){fetch("https://admin.transconsolution.net/api/brand/list",{method:"POST",redirect:"follow"}).then((function(e){return e.json()})).then((function(e){F(e.data)})).catch((function(e){return console.log("error",e)}));fetch("https://admin.transconsolution.net/api/category/list",{method:"POST",redirect:"follow"}).then((function(e){return e.json()})).then((function(e){D(e.data)})).catch((function(e){return console.log("error",e)}))}),[]);var me=(0,l.useState)([]),he=(0,o.Z)(me,2),pe=(he[0],he[1],(0,p.UO)().id);return console.log(JSON.stringify({_id:pe})),console.log("https://admin.transconsolution.net/api/product/details"),(0,l.useState)((function(){fetch("https://admin.transconsolution.net/api/product/details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:pe}),redirect:"follow"}).then((function(e){return e.json()})).then((function(e){console.log("API Response:",e),oe(e.data),console.log(e.data.photo_gallery),_(e.data.photo_gallery),te(e.data.relatedProducts)})).catch((function(e){return console.log("error",e)}))}),[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h.Ix,{}),(0,f.jsx)("h1",{className:"headingType1 text-center mb-4",children:"Add New Product"}),(0,f.jsx)(s.xH,{children:(0,f.jsx)(s.sl,{className:"p-5",children:(0,f.jsx)(s.lx,{onSubmit:function(e){e.preventDefault();var n=(0,o.Z)(e.target,7),a=n[0],r=n[1],s=n[2],l=n[3],c=n[4],i=n[5],d=n[6],u=!1,m={};console.log(a,r,s,l,c,i,d);var p={_id:re._id,product_name:a.value,sku:r.value,short_description:l.value,brand:s.value,status:parseInt(d.value),product_url:i.value,photo:j._id,photo_gallery:S?S.map((function(e){return e._id})):[],relatedProducts:ee?ee.map((function(e){return e._id})):[]};console.log(JSON.stringify(p)),p.product_name||(m["product-name"]="Please add a product Name",u=!0),p.short_description||(m.description="Please add Short description",u=!0),p.brand||(m["product-brand"]="Please select a Brand Name",u=!0),V(m),console.log(m),u||fetch("https://admin.transconsolution.net/api/product/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p),redirect:"follow"}).then((function(e){return e.json()})).then((function(e){200==e.status&&(h.Am.success(e.message),setTimeout((function(){t("/products")}),3e3))})).catch((function(e){return console.log("error",e)}))},children:(0,f.jsxs)(s.rb,{className:"g-4",children:[(0,f.jsx)(s.b7,{lg:8,children:(0,f.jsxs)(s.rb,{children:[(0,f.jsxs)(s.b7,{lg:6,className:"mb-4",children:[(0,f.jsx)(s.jO,{placeholder:"Product Name",label:"Product Name",name:"product-name",defaultValue:re.product_name}),(0,f.jsx)("div",{className:"hasError",children:B["product-name"]})]}),(0,f.jsx)(s.b7,{lg:6,className:"mb-4",children:(0,f.jsx)(s.jO,{placeholder:"Sku",label:"Sku",name:"product-sku",defaultValue:re.sku})}),(0,f.jsxs)(s.b7,{lg:4,className:"mb-4",children:[(0,f.jsxs)(s.LX,{name:"product-brand",label:"Select Brand",value:(null===(e=re.brand)||void 0===e?void 0:e._id)||"",onChange:function(e){oe((0,a.Z)((0,a.Z)({},re),{},{brand:{_id:e.target.value}}))},children:[(0,f.jsx)("option",{value:"",children:"Select Brand"}),E.map((function(e,t){return(0,f.jsx)("option",{value:e._id,children:e.brand_name},t)}))]}),(0,f.jsx)("div",{className:"hasError",children:B["product-brand"]})]}),(0,f.jsx)(s.b7,{lg:4,className:"mb-4"}),(0,f.jsxs)(s.b7,{lg:12,className:"mb-4",children:[(0,f.jsx)(s.PB,{placeholder:"Description",label:"Description",name:"short-description",rows:5,defaultValue:re.short_description}),(0,f.jsx)("div",{className:"hasError",children:B.short_description})]}),(0,f.jsx)(s.b7,{lg:12,className:"mb-4",children:(0,f.jsxs)("div",{className:"",children:[(0,f.jsx)("label",{className:"form-label ",children:"Related Product"}),(0,f.jsx)("ul",{className:"selectedProducts",children:ee.map((function(e,t){return(0,f.jsx)("li",{children:(0,f.jsxs)("span",{children:[" ",e.product_name," ",(0,f.jsx)(d.Z,{icon:u.x,onClick:function(){return t=e,z((function(e){return[].concat((0,r.Z)(e),[t])})),void te((function(e){return e.filter((function(e){return e._id!==t._id}))}));var t}})]})},t)}))}),(0,f.jsxs)("div",{children:[(0,f.jsx)(s.jO,{type:"text",placeholder:"Search Related Product...",onChange:function(e){var t=new RegExp("^"+e.target.value,"ig"),n=q.filter((function(e){return e.product_name.match(t)}));W(n),ie(!0)}}),ce&&(0,f.jsx)("ul",{className:"searchReference",children:Q.map((function(e,t){return(0,f.jsx)("li",{onClick:function(){return t=e,te((function(e){return[].concat((0,r.Z)(e),[t])})),z((function(e){return e.filter((function(e){return e._id!==t._id}))})),void ie(!1);var t},children:(0,f.jsx)("label",{children:e.product_name})},t)}))})]})]})}),(0,f.jsx)(s.b7,{lg:8,className:"mb-4",children:(0,f.jsx)(s.jO,{type:"text",label:"Product Url",defaultValue:re.product_url})}),(0,f.jsx)(s.b7,{lg:4,className:"mb-4",children:(0,f.jsxs)(s.LX,{name:"status",label:"Status",children:[(0,f.jsx)("option",{value:"1",children:"Active"}),(0,f.jsx)("option",{value:"0",children:"Inactive"})]})})]})}),(0,f.jsxs)(s.b7,{lg:4,children:[(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsx)("h5",{children:"Product Image"}),(0,f.jsxs)("div",{className:"profileImage",children:[(0,f.jsx)("img",{src:j.image?"https://admin.transconsolution.net/"+j.image:re.photo&&re.photo.image?"https://admin.transconsolution.net/"+re.photo.image:c,width:"100%",className:"mb-3"}),(0,f.jsx)(s.jO,{type:"file",onChange:function(e){return function(e){var t=new FormData;t.append("image",e.files[0],e.files[0].name),t.append("type","image"),fetch("https://admin.transconsolution.net/api/images/add",{method:"POST",body:t,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){console.log(e),g(e.data)})).catch((function(e){return console.log("error",e)}))}(e.target)}})]}),(0,f.jsx)(s.Jh,{component:"span",id:"exampleFormControlInputHelpInline",children:"Product Image must be 1200px X 12000px and ( 72dpi if possible)"})]}),(0,f.jsx)("h5",{children:"Product Thumnails"}),(0,f.jsxs)("ul",{className:"arGalleryImg",children:[null===S||void 0===S?void 0:S.map((function(e,t){return(0,f.jsx)("li",{children:(0,f.jsx)("img",{src:"https://admin.transconsolution.net/"+e.image,alt:e.name})},t)})),(0,f.jsxs)("li",{children:[(0,f.jsx)("label",{htmlFor:"myGallery",className:"addGallery",children:(0,f.jsx)(d.Z,{icon:m.q})}),(0,f.jsx)(s.jO,{id:"myGallery",multiple:!0,type:"file",onChange:function(e){var t=e.target.files;if(t.length>0){var n=Array.from(t).map((function(e){var t=new FormData;return t.append("image",e,e.name),t.append("type","image"),fetch("https://admin.transconsolution.net/api/images/add",{method:"POST",body:t,redirect:"follow"}).then((function(e){return e.json()})).catch((function(e){return console.log("error",e),null}))}));Promise.all(n).then((function(e){var t=e.filter((function(e){return null!==e})).map((function(e){return e.data}));_((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(t))}))}))}},name:"myGallery"})]})]}),(0,f.jsx)(s.Jh,{component:"span",id:"exampleFormControlInputHelpInline",children:"Product Thumnails must be 1200px X 12000px and ( 72dpi if possible)"})]}),(0,f.jsx)(s.b7,{lg:12,className:"text-center",children:(0,f.jsx)(s.u5,{color:"primary",className:"py-2 px-5",type:"submit",children:"Submit"})})]})})})})]})}},31110:function(){},76699:function(e,t,n){e.exports=n.p+"static/media/no-img.2efe78cdf6dbf909f571.jpg"}}]);
//# sourceMappingURL=225.4108c146.chunk.js.map