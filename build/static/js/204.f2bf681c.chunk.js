"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[204],{54204:function(e,t,a){a.r(t);var n=a(29439),r=a(78983),o=a(72791),l=a(57689),c=a(9085),i=a(80184);t.default=function(){var e=(0,o.useState)(!1),t=(0,n.Z)(e,2),a=t[0],s=t[1],u=(0,o.useState)([]),d=(0,n.Z)(u,2),m=d[0],h=d[1],f=(0,l.s0)(),p=(0,o.useState)({}),g=(0,n.Z)(p,2),x=g[0],j=g[1];return(0,o.useEffect)((function(){fetch("http://localhost:5000/api/category/list",{method:"POST",redirect:"follow"}).then((function(e){return e.json()})).then((function(e){console.log(e.data),h(e.data)})).catch((function(e){return console.log("error",e)}))}),[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Ix,{}),(0,i.jsx)("h1",{className:"headingType1 text-center mb-4",children:"Add New Category"}),(0,i.jsx)(r.xH,{children:(0,i.jsx)(r.sl,{className:"p-5",children:(0,i.jsx)(r.rb,{className:"justify-content-center",children:(0,i.jsx)(r.b7,{lg:12,children:(0,i.jsxs)(r.lx,{className:"row g-3 needs-validation",noValidate:!0,validated:a,onSubmit:function(e){var t=e.currentTarget;e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),s(!0);var a=(0,n.Z)(e.target,3),r=a[0],o=a[1],l=(a[2],{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.value,parent:o.value||null,image:x._id||null})});fetch("http://localhost:5000/api/category/create",l).then((function(e){return e.json()})).then((function(e){200==e.status?(c.Am.success(e.message),setTimeout((function(){f("/category")}),5e3)):c.Am.error(e.message)})).catch((function(e){return console.log("error",e)}))},children:[(0,i.jsx)(r.b7,{md:4,children:(0,i.jsx)(r.jO,{type:"text",defaultValue:"",feedbackInvalid:"Please enter a Brand Name.",id:"validationCustom01",label:"Category name",name:"name",required:!0})}),(0,i.jsx)(r.b7,{md:4,children:(0,i.jsxs)(r.LX,{type:"text",defaultValue:"",feedbackInvalid:"Please Select Status.",id:"validationCustom02",label:"Parent",name:"parent",children:[(0,i.jsx)("option",{value:"",children:"Select Category"}),m.map((function(e,t){return(0,i.jsx)("option",{value:e._id,children:e.name},t)}))]})}),(0,i.jsx)(r.b7,{md:4,children:(0,i.jsx)(r.jO,{type:"file",name:"uploadImage",label:"Upload Image",onChange:function(e){return function(e){var t=new FormData;t.append("image",e.files[0],e.files[0].name),t.append("type","image"),fetch("http://localhost:5000/api/images/add",{method:"POST",body:t,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){console.log(e),j(e.data)})).catch((function(e){return console.log("error",e)}))}(e.target)}})}),(0,i.jsx)(r.b7,{md:6}),(0,i.jsx)(r.b7,{xs:12,className:"text-center",children:(0,i.jsx)(r.u5,{color:"primary",type:"submit",className:"py-2 px-5",children:"Submit form"})})]})})})})})]})}}}]);
//# sourceMappingURL=204.f2bf681c.chunk.js.map