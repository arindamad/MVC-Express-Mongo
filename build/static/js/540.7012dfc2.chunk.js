"use strict";(self.webpackChunk_transcon_admin_react=self.webpackChunk_transcon_admin_react||[]).push([[540],{69540:function(e,t,n){n.r(t);var a=n(93433),s=n(74165),i=n(15861),r=n(1413),c=n(29439),l=n(98030),o=n(2501),u=n(55068),d=n(24846),m=n(78983),h=n(72791),p=n(57689),x=n(9085),f=(n(15594),n(7692)),v=n(63524),j=n(39126),g=n(84373),_=n(78820),b=n(80184);t.default=function(){(0,p.s0)();var e=(0,h.useState)(!1),t=(0,c.Z)(e,2),n=t[0],y=t[1],N=(0,h.useState)(!1),S=(0,c.Z)(N,2),C=S[0],Z=S[1],O=(0,h.useState)(0),P=(0,c.Z)(O,2),w=P[0],T=P[1],V=(0,h.useState)(""),I=(0,c.Z)(V,2),A=I[0],F=I[1],L=(0,h.useState)([]),E=(0,c.Z)(L,2),B=(E[0],E[1],(0,h.useState)([])),D=(0,c.Z)(B,2),W=D[0],J=D[1],U=(0,h.useState)({}),q=(0,c.Z)(U,2),R=q[0],M=q[1],H=(0,p.UO)().id,G=function(e){if(Z(!0),W.length){var t=W.map((function(e){var t=(0,r.Z)({},e);t.section_value=JSON.stringify(e.section_value),t.page_id=H;var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),redirect:"follow"};return t._id?fetch("https://admin.transconsolution.net/api/cms/update-one",n).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw console.log("error",e),e})):fetch("https://admin.transconsolution.net/api/cms/create",n).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw console.log("error",e),e}))}));Promise.all(t).then((function(e){Z(!1),x.Am.success("Finally Updated all additional content.")})).catch((function(e){Z(!1),x.Am.error("Error updating additional content."),console.error("Error updating content:",e)}))}},z=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,n){var a,i,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Are you Sure to delete this Section?")){e.next=2;break}return e.abrupt("return");case 2:if(!n._id){e.next=19;break}return console.log(n._id),e.prev=4,a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:n._id}),redirect:"follow"},e.next=8,fetch("https://admin.transconsolution.net/api/cms/delete",a);case 8:return i=e.sent,e.next=11,i.json();case 11:r=e.sent,console.log(r),x.Am.success("Successfully deleted data."),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),x.Am.error("Error while deleting data.");case 19:J((function(e){return e.splice(t,1)}));case 20:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t,n){return e.apply(this,arguments)}}(),X=function(e){F(e),T(2)},Y=[{name:"Short Text",icon:(0,b.jsx)(v.UZn,{}),type:"text"},{name:"Long Text",icon:(0,b.jsx)(f.stW,{}),type:"textarea"},{name:"Image",icon:(0,b.jsx)(f.fco,{}),type:"img"},{name:"Link",icon:(0,b.jsx)(j.Gzp,{}),type:"url"}],K=function(e){return e+"_"+Math.floor(99999*Math.random())},Q=function(e,t){var n=(0,a.Z)(W);n[e].section_value[t].moreField=!0,J(n)},$=(0,h.useState)(!1),ee=(0,c.Z)($,2),te=ee[0],ne=ee[1],ae=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,n,i,r){var c,l,o,u,d;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=(0,a.Z)(W),"text"!==r){e.next=5;break}c[n].section_value[i].value=t.target.value,e.next=31;break;case 5:if("file"!==r){e.next=30;break}return Z(!0),console.log(t.target.value),e.prev=8,(l=new FormData).append("image",t.target.files[0],t.target.files[0].name),l.append("type","image"),o={method:"POST",body:l,redirect:"follow"},e.next=15,fetch("https://admin.transconsolution.net/api/images/add",o);case 15:return u=e.sent,e.next=18,u.json();case 18:d=e.sent,c[n].section_value[i].value=d.data.image,c[n].section_value[i].file_type=d.data.type,Z(!1),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(8),Z(!1),console.error("error",e.t0);case 28:e.next=31;break;case 30:"url_text"===r?c[n].section_value[i].url_text=t.target.value:"url"===r?c[n].section_value[i].value=t.target.value:alert("Please Enter a attr.");case 31:console.log(c),J(c);case 33:case"end":return e.stop()}}),e,null,[[8,24]])})));return function(t,n,a,s){return e.apply(this,arguments)}}(),se=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,n,i,r,c){var l,o,u,d,m;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=(0,a.Z)(W),"text"!==c){e.next=5;break}l[n].section_value[i][r].value=t.target.value,e.next=31;break;case 5:if("file"!==c){e.next=30;break}return Z(!0),console.log(t.target.value),e.prev=8,(o=new FormData).append("image",t.target.files[0],t.target.files[0].name),o.append("type","image"),u={method:"POST",body:o,redirect:"follow"},e.next=15,fetch("https://admin.transconsolution.net/api/images/add",u);case 15:return d=e.sent,e.next=18,d.json();case 18:m=e.sent,l[n].section_value[i][r].value=m.data.image,l[n].section_value[i][r].file_type=m.data.type,Z(!1),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(8),Z(!1),console.error("error",e.t0);case 28:e.next=31;break;case 30:"url_text"===c?l[n].section_value[i][r].url_text=t.target.value:"url"===c?l[n].section_value[i][r].value=t.target.value:alert("Please Enter a attr.");case 31:J(l);case 32:case"end":return e.stop()}}),e,null,[[8,24]])})));return function(t,n,a,s,i){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page_id:H}),redirect:"follow"};fetch("https://admin.transconsolution.net/api/cms/list",e).then((function(e){return e.json()})).then((function(e){if(e.data){var t=e.data.map((function(e){try{e.section_value=JSON.parse(e.section_value)}catch(t){console.error("Error parsing section_value:",t),e.section_value=[]}return e}));J(t)}})).catch((function(e){return console.log("error",e)})),fetch("https://admin.transconsolution.net/api/pages/list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:H}),redirect:"follow"}).then((function(e){return e.json()})).then((function(e){M(e.data[0]),console.log(e)})).catch((function(e){return console.log("error",e)}))}),[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x.Ix,{}),C&&(0,b.jsx)("div",{className:"loader-container",children:(0,b.jsx)("div",{className:"loader"})}),(0,b.jsx)("h1",{className:"headingType1 text-center mb-4",children:"Pages"}),(0,b.jsx)(m.lx,{className:"g-3 needs-validation",noValidate:!0,validated:n,onSubmit:function(e){e.preventDefault();var t=e.currentTarget,n=(0,c.Z)(e.target,5),a=n[0],s=n[1],i=n[2],r=n[3],l=n[4];if(!1===t.checkValidity())y(!0),e.stopPropagation();else{y(!1);var o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:H,page_name:a.value,page_description:s.value||"",meta_title:i.value||"",meta_description:r.value||"",status:l.value||1})};Z(!0),fetch("https://admin.transconsolution.net/api/pages/update",o).then((function(e){return e.json()})).then((function(e){200==e.status?(x.Am.success(e.message),y(!1),G(e.data)):x.Am.error(e.message)})).catch((function(e){return console.log("error",e)}))}},children:(0,b.jsxs)(m.rb,{className:"g-5 justify-content-center",children:[(0,b.jsx)(m.b7,{lg:8,children:(0,b.jsx)(m.xH,{children:(0,b.jsxs)(m.sl,{className:"p-5",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)(m.jO,{type:"text",defaultValue:R.page_name,feedbackInvalid:"Please enter a Brand Name.",id:"validationCustom1",label:"Page Name",name:"name",required:!0}),(0,b.jsxs)("p",{children:["Your Generated Url Slag: ","/"+R.page_slug]})]}),(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)(m.PB,{defaultValue:R.page_description,feedbackInvalid:"Please Select Status.",label:"Description",id:"validationCustom2",name:"description",rows:6})})]})})}),(0,b.jsx)(m.b7,{lg:4,children:(0,b.jsx)(m.xH,{children:(0,b.jsxs)(m.sl,{className:"p-5",children:[(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)(m.jO,{type:"text",defaultValue:R.meta_title,feedbackInvalid:"Please enter a Brand Name.",id:"validationCustom3",label:"Meta Title",name:"meta_title"})}),(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)(m.PB,{defaultValue:R.meta_description,feedbackInvalid:"Please Select Status.",label:"Meta Description",id:"validationCustom3",name:"meta_description"})}),(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsxs)(m.LX,{type:"text",defaultValue:"",feedbackInvalid:"Please Select Status.",id:"validationCustom4",label:"Status",name:"status",required:!0,children:[(0,b.jsx)("option",{value:"1",children:"Active"}),(0,b.jsx)("option",{value:"0",children:"Inactive"})]})}),(0,b.jsx)("div",{className:"text-center mt-4",children:(0,b.jsx)(m.u5,{color:"primary",type:"submit",className:"py-2 px-5",children:"Update Page"})})]})})})]})}),(0,b.jsx)(m.xH,{className:"mt-4 ".concat(te?"i_am_a_dev":""),children:(0,b.jsxs)(m.sl,{className:"p-5",children:[(0,b.jsxs)(m.rb,{children:[(0,b.jsx)(m.b7,{lg:!0,children:(0,b.jsx)("h4",{className:"mb-4",children:"Sections"})}),(0,b.jsx)(m.b7,{lg:"auto",children:(0,b.jsx)(m.kV,{onChange:function(e){e.target.checked&&(confirm("Are you sure you want to activate Developer option? If you are not able to handele it can break your layout. ")?ne(!0):(e.target.checked=!1,ne(!1)))},label:"Developer Option",id:"formSwitchCheckDefault"})})]}),W.map((function(e,t){return(0,b.jsxs)("div",{className:"each_sections",children:[console.log(e),(0,b.jsxs)("div",{className:"each_section_header",children:[(0,b.jsx)(m.jO,{defaultValue:e.section_name,placeholder:"Section Title..."}),(0,b.jsx)("div",{className:"copySectionProp","data-key":t,title:e._id,onClick:function(){return z(t,e)},children:(0,b.jsx)(_.ywL,{})})]}),(0,b.jsx)("div",{className:"each_section_body",children:e.section_value&&e.section_value.map((function(e,n){return(0,b.jsxs)("div",{children:[!Array.isArray(e)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"each_single_items mb-3",children:["text"===e.type&&(0,b.jsx)(m.jO,{label:"Short Text..",className:"",defaultValue:e.value,onChange:function(e){return ae(e,t,n,"text")}}),"img"===e.type&&e.value&&(0,b.jsx)("img",{src:"https://admin.transconsolution.net/"+e.value,width:"100px",style:{display:"block"}}),"img"===e.type&&(0,b.jsx)(m.jO,{label:"Upload Image..",type:"file",className:"",onChange:function(e){return ae(e,t,n,"file")}}),"textarea"===e.type&&(0,b.jsx)(m.PB,{label:"Enter Long Text..",className:"",defaultValue:e.value,onChange:function(e){return ae(e,t,n,"text")}}),"url"===e.type&&(0,b.jsxs)(m.rb,{children:[(0,b.jsx)(m.b7,{children:(0,b.jsx)(m.jO,{label:"Link Text",className:"",defaultValue:e.value,onChange:function(e){return ae(e,t,n,"url_text")}})}),(0,b.jsx)(m.b7,{children:(0,b.jsx)(m.jO,{label:"Link Value",className:"",defaultValue:e.value,onChange:function(e){return ae(e,t,n,"url")}})})]}),!e.moreField&&(0,b.jsx)("button",{className:"arPlusIcon",onClick:function(){return Q(t,n)},children:(0,b.jsx)(d.Z,{icon:l.q})}),n>0&&(0,b.jsx)("button",{className:"arRemoveIcon",onClick:function(){return Q(t,n)},children:(0,b.jsx)(d.Z,{icon:o.c})})]}),e.moreField&&(0,b.jsx)(m.rb,{className:"mt-4 mb-4",children:Y.map((function(e,s){return(0,b.jsx)(m.b7,{lg:3,children:(0,b.jsxs)("div",{className:"each_section_Wrp",onClick:function(s){return function(e,t,n,s){var i=(0,a.Z)(W);i[n].section_value.push({type:e,id:t}),i[n].section_value[s].moreField=!1,J(i)}(e.type,K(e.type),t,n)},"data-id":K(e.type),children:[(0,b.jsx)("div",{className:"aicon",children:e.icon}),(0,b.jsx)("div",{className:"section_title",children:e.name})]})},s)}))})]}),Array.isArray(e)&&(0,b.jsxs)("div",{className:"each_repeater_wrapper",children:[e.map((function(s,i){return(0,b.jsxs)("div",{className:"each_repeater_item mb-3",children:["text"===s.type&&(0,b.jsx)(m.jO,{label:"Short Text..",className:"",defaultValue:e.value,onChange:function(e){return se(e,t,n,i,"text")}}),"img"===s.type&&(0,b.jsx)(m.jO,{label:"Upload Image..",type:"file",className:"",defaultValue:e.value,onChange:function(e){return se(e,t,n,i,"file")}}),"textarea"===s.type&&(0,b.jsx)(m.PB,{label:"Enter Long Text..",className:"",defaultValue:e.value,onChange:function(e){return se(e,t,n,i,"text")}}),"url"===s.type&&(0,b.jsxs)(m.rb,{children:[(0,b.jsx)(m.b7,{children:(0,b.jsx)(m.jO,{label:"Link Text",className:"",defaultValue:e.value,onChange:function(e){return se(e,t,n,i,"url_text")}})}),(0,b.jsx)(m.b7,{children:(0,b.jsx)(m.jO,{label:"Link Value",className:"",defaultValue:e.value,onChange:function(e){return se(e,t,n,i,"url")}})})]}),s.moreField&&(0,b.jsx)(m.rb,{className:"mt-4 mb-4",children:Y.map((function(e,s){return(0,b.jsx)(m.b7,{lg:3,children:(0,b.jsxs)("div",{className:"each_section_Wrp",onClick:function(){return function(e,t,n,s,i){var r=(0,a.Z)(W);r[n].section_value[s].push({type:e,id:t}),r[n].section_value[s][i].moreField=!1,J(r)}(e.type,K(e.type),t,n,i)},children:[(0,b.jsx)("div",{className:"aicon",children:e.icon}),(0,b.jsx)("div",{className:"section_title",children:e.name})]})},s)}))}),!s.moreField&&(0,b.jsx)("button",{className:"arPlusIcon",onClick:function(){return function(e,t,n){var s=(0,a.Z)(W);s[e].section_value[t][n].moreField=!0,J(s)}(t,n,i)},children:(0,b.jsx)(d.Z,{icon:l.q})}),i>0&&(0,b.jsx)("button",{className:"arRemoveIcon",onClick:function(){return repeatRemoveItem(t,n,k)},children:(0,b.jsx)(d.Z,{icon:o.c})})]},i)})),(0,b.jsx)("div",{className:"text-end",children:(0,b.jsxs)(m.u5,{color:"info",onClick:function(){return function(e,t){var n=(0,a.Z)(W),s=n[e].section_value[t];n[e].section_value.push(s),J(n)}(t,n)},children:[(0,b.jsx)(g.Odh,{})," Repeat"]})})]})]},n)}))})]},t)})),2==w&&"single"==A&&(0,b.jsx)("div",{className:"single_object_selected mb-5",children:(0,b.jsx)(m.rb,{children:Y.map((function(e,t){return(0,b.jsx)(m.b7,{lg:3,children:(0,b.jsxs)("div",{className:"each_section_Wrp",onClick:function(t){return function(e,t){J((function(n){return T(0),[].concat((0,a.Z)(n),[{section_prop:K("section"),section_name:"Section "+n.length,section_value:[{type:e,id:t}]}])}))}(e.type,K(e.type))},children:[(0,b.jsx)("div",{className:"aicon",children:e.icon}),(0,b.jsx)("div",{className:"section_title",children:e.name})]})},t)}))})}),2==w&&"repeater"==A&&(0,b.jsx)("div",{className:"repeater_object_selected mb-5",children:(0,b.jsx)(m.rb,{children:Y.map((function(e,t){return(0,b.jsx)(m.b7,{lg:3,onClick:function(){return function(e,t){J((function(n){return T(0),[].concat((0,a.Z)(n),[{section_prop:K("section"),section_name:"Section "+n.length,section_value:[[{type:e,id:t}]]}])}))}(e.type,K(e.type))},children:(0,b.jsxs)("div",{className:"each_section_Wrp",children:[(0,b.jsx)("div",{className:"aicon",children:e.icon}),(0,b.jsx)("div",{className:"section_title",children:e.name})]})},t)}))})}),1==w&&(0,b.jsxs)("div",{className:"allSectionTypeWrp",children:[(0,b.jsx)("div",{className:"removeBtn",children:(0,b.jsx)(d.Z,{icon:u.x,customClassName:"nav-icon"})}),(0,b.jsxs)(m.rb,{className:"g-3",children:[(0,b.jsx)(m.b7,{lg:"3",children:(0,b.jsxs)("div",{className:"each_section_Wrp",onClick:function(){return X("single")},children:[(0,b.jsx)("div",{className:"aicon",children:(0,b.jsx)(f.nuP,{})}),(0,b.jsx)("div",{className:"section_title",children:"Single"})]})}),(0,b.jsx)(m.b7,{lg:"3",children:(0,b.jsxs)("div",{className:"each_section_Wrp",onClick:function(){return X("repeater")},children:[(0,b.jsx)("div",{className:"aicon",children:(0,b.jsx)(f.bB,{})}),(0,b.jsx)("div",{className:"section_title",children:"Repeater"})]})})]})]}),0==w&&(0,b.jsx)("div",{className:"addNewSection",onClick:function(){return T(1)},children:(0,b.jsx)(d.Z,{icon:l.q,customClassName:"nav-icon"})})]})})]})}},15594:function(){}}]);
//# sourceMappingURL=540.7012dfc2.chunk.js.map