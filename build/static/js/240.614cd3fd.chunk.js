"use strict";(self.webpackChunk_transcon_admin_react=self.webpackChunk_transcon_admin_react||[]).push([[240],{56240:function(e,n,t){t.r(n);var r=t(1413),a=t(93433),s=t(29439),c=t(78983),l=t(72791),o=t(76699),i=t(72010),d=(t(51802),t(25646),t(24846)),u=t(55068),m=t(98030),h=(t(31110),t(9085)),p=t(57689),f=(t(30146),t(80184));n.default=function(){var e=(0,p.s0)(),n=(0,l.useState)({}),t=(0,s.Z)(n,2),x=t[0],j=t[1],g=(0,l.useState)(null),b=(0,s.Z)(g,2),v=b[0],S=b[1],y=(0,l.useState)(!1),N=(0,s.Z)(y,2),_=(N[0],N[1],(0,l.useState)([])),P=(0,s.Z)(_,2),Z=(P[0],P[1],(0,l.useState)("")),w=(0,s.Z)(Z,2),O=(w[0],w[1],(0,l.useState)("")),C=(0,s.Z)(O,2),I=(C[0],C[1],(0,l.useState)([])),T=(0,s.Z)(I,2),k=T[0],E=T[1],F=(0,l.useState)([]),D=(0,s.Z)(F,2),G=D[0],X=D[1],A=(0,l.useState)({}),B=(0,s.Z)(A,2),J=B[0],L=B[1],R=(0,l.useState)([]),H=(0,s.Z)(R,2),U=(H[0],H[1]),q=(0,l.useState)([]),M=(0,s.Z)(q,2),W=M[0],z=M[1],K=(0,l.useState)([]),Q=(0,s.Z)(K,2),V=Q[0],Y=Q[1],$=(0,l.useState)([]),ee=(0,s.Z)($,2),ne=ee[0],te=ee[1],re=(0,l.useState)(!0),ae=(0,s.Z)(re,2),se=ae[0],ce=ae[1];(0,l.useEffect)((function(){fetch("https://admin.transconsolution.net/api/product/list",{method:"POST",redirect:"follow"}).then((function(e){return e.json()})).then((function(e){z(e.data)})).catch((function(e){return console.log("error",e)}))}),[]);var le=(0,l.useState)((function(){return i.EditorState.createEmpty()})),oe=(0,s.Z)(le,2);oe[0],oe[1];(0,l.useEffect)((function(){fetch("https://admin.transconsolution.net/api/brand/list",{method:"POST",redirect:"follow"}).then((function(e){return e.json()})).then((function(e){E(e.data)})).catch((function(e){return console.log("error",e)}));fetch("https://admin.transconsolution.net/api/category/list",{method:"POST",redirect:"follow"}).then((function(e){return e.json()})).then((function(e){X(e.data)})).catch((function(e){return console.log("error",e)}))}),[]);var ie=(0,l.useState)([]),de=(0,s.Z)(ie,2);de[0],de[1];(0,l.useEffect)((function(){fetch("https://admin.transconsolution.net/api/images/list",{method:"POST",redirect:"follow"}).then((function(e){return e.json()})).then((function(e){U(e.data),he((function(n){return n.map((function(n){return 2===n.id?(0,r.Z)((0,r.Z)({},n),{},{content:(0,f.jsx)("div",{children:(0,f.jsx)(c.rb,{children:e.data.map((function(e,n){return(0,f.jsxs)(c.b7,{lg:2,children:[(0,f.jsx)("img",{src:"https://admin.transconsolution.net/"+e.image,alt:"Image ".concat(n),style:{maxWidth:"100%"}}),(0,f.jsxs)("label",{children:[(0,f.jsx)("input",{type:"checkbox"}),"Select"]})]},n)}))})})}):n}))}))})).catch((function(e){return console.log("error",e)}))}),[]);var ue=(0,l.useState)([{id:1,label:"Upload files",content:(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{children:"Drop files to upload"}),(0,f.jsx)("p",{children:"or"}),(0,f.jsx)(c.u5,{children:"Select Files"})]})},{id:2,label:"Media Library",content:(0,f.jsx)("div",{children:(0,f.jsx)(c.rb,{})})}]),me=(0,s.Z)(ue,2),he=(me[0],me[1]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h.Ix,{}),(0,f.jsx)("h1",{className:"headingType1 text-center mb-4",children:"Add New Product"}),(0,f.jsx)(c.xH,{children:(0,f.jsx)(c.sl,{className:"p-5",children:(0,f.jsx)(c.lx,{onSubmit:function(n){n.preventDefault();var t=(0,s.Z)(n.target,8),r=t[0],a=t[1],c=t[2],l=t[3],o=t[4],i=t[5],d=t[6],u=t[7],m=!1,p={};console.log(r,a,c,l,o,i,d,u);var f={product_name:r.value,sku:a.value,short_description:o.value,brand:c.value,category:l.value,status:parseInt(u.value),product_url:d.value,photo:x._id,photo_gallery:v?v.map((function(e){return e._id})):[],relatedProducts:ne?ne.map((function(e){return e._id})):[]};console.log(JSON.stringify(f)),f.product_name||(p["product-name"]="Please add a product Name",m=!0),f.short_description||(p.description="Please add Short description",m=!0),f.brand||(p["product-brand"]="Please select a Brand Name",m=!0),f.category||(p["product-category"]="Please select product category",m=!0),L(p),m||fetch("https://admin.transconsolution.net/api/product/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f),redirect:"follow"}).then((function(e){return e.json()})).then((function(n){200==n.status&&(h.Am.success(n.message),setTimeout((function(){e("/products")}),3e3))})).catch((function(e){return console.log("error",e)}))},children:(0,f.jsxs)(c.rb,{className:"g-4",children:[(0,f.jsx)(c.b7,{lg:8,children:(0,f.jsxs)(c.rb,{children:[(0,f.jsxs)(c.b7,{lg:6,className:"mb-4",children:[(0,f.jsx)(c.jO,{placeholder:"Product Name",label:"Product Name",name:"product-name"}),(0,f.jsx)("div",{className:"hasError",children:J["product-name"]})]}),(0,f.jsx)(c.b7,{lg:6,className:"mb-4",children:(0,f.jsx)(c.jO,{placeholder:"Sku",label:"Sku",name:"product-sku"})}),(0,f.jsxs)(c.b7,{lg:4,className:"mb-4",children:[(0,f.jsxs)(c.LX,{name:"product-brand",label:"Select Brand",children:[(0,f.jsx)("option",{value:"",children:"Select Brand"}),k.map((function(e,n){return(0,f.jsx)("option",{value:e._id,children:e.brand_name},n)}))]}),(0,f.jsx)("div",{className:"hasError",children:J["product-brand"]})]}),(0,f.jsxs)(c.b7,{lg:4,className:"mb-4",children:[(0,f.jsxs)(c.LX,{name:"product-category",label:"Select Category",children:[(0,f.jsx)("option",{value:"",children:"Select Category"}),G.map((function(e,n){return(0,f.jsx)("option",{value:e._id,children:e.name},n)}))]}),(0,f.jsx)("div",{className:"hasError",children:J["product-category"]})]}),(0,f.jsx)(c.b7,{lg:4,className:"mb-4"}),(0,f.jsxs)(c.b7,{lg:12,className:"mb-4",children:[(0,f.jsx)(c.PB,{placeholder:"Description",label:"Description",name:"short-description",rows:5}),(0,f.jsx)("div",{className:"hasError",children:J.short_description})]}),(0,f.jsx)(c.b7,{lg:12,className:"mb-4",children:(0,f.jsxs)("div",{className:"",children:[(0,f.jsx)("label",{className:"form-label ",children:"Related Product"}),(0,f.jsx)("ul",{className:"selectedProducts",children:ne.map((function(e,n){return(0,f.jsx)("li",{children:(0,f.jsxs)("span",{children:[" ",e.product_name," ",(0,f.jsx)(d.Z,{icon:u.x,onClick:function(){return n=e,z((function(e){return[].concat((0,a.Z)(e),[n])})),void te((function(e){return e.filter((function(e){return e._id!==n._id}))}));var n}})]})},n)}))}),(0,f.jsxs)("div",{children:[(0,f.jsx)(c.jO,{type:"text",placeholder:"Search Related Product...",onChange:function(e){var n=new RegExp("^"+e.target.value,"ig"),t=W.filter((function(e){return e.product_name.match(n)}));Y(t),ce(!0)}}),se&&(0,f.jsx)("ul",{className:"searchReference",children:V.map((function(e,n){return(0,f.jsx)("li",{onClick:function(){return n=e,te((function(e){return[].concat((0,a.Z)(e),[n])})),z((function(e){return e.filter((function(e){return e._id!==n._id}))})),void ce(!1);var n},children:(0,f.jsx)("label",{children:e.product_name})},n)}))})]})]})}),(0,f.jsx)(c.b7,{lg:8,className:"mb-4",children:(0,f.jsx)(c.jO,{type:"text",label:"Product Url"})}),(0,f.jsx)(c.b7,{lg:4,className:"mb-4",children:(0,f.jsxs)(c.LX,{name:"status",label:"Status",children:[(0,f.jsx)("option",{value:"1",children:"Active"}),(0,f.jsx)("option",{value:"0",children:"Inactive"})]})})]})}),(0,f.jsxs)(c.b7,{lg:4,children:[(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsx)("h5",{children:"Product Image"}),(0,f.jsxs)("div",{className:"profileImage",children:[(0,f.jsx)("img",{src:x.image?"https://admin.transconsolution.net/"+x.image:o,width:"100%",className:"mb-3"}),(0,f.jsx)(c.jO,{type:"file",onChange:function(e){return function(e){var n=new FormData;n.append("image",e.files[0],e.files[0].name),n.append("type","image"),fetch("https://admin.transconsolution.net/api/images/add",{method:"POST",body:n,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){console.log(e),j(e.data)})).catch((function(e){return console.log("error",e)}))}(e.target)}})]}),(0,f.jsx)(c.Jh,{component:"span",id:"exampleFormControlInputHelpInline",children:"Product Image must be 1200px X 12000px and ( 72dpi if possible)"})]}),(0,f.jsx)("h5",{children:"Product Thumnails"}),(0,f.jsxs)("ul",{className:"arGalleryImg",children:[null===v||void 0===v?void 0:v.map((function(e,n){return(0,f.jsx)("li",{children:(0,f.jsx)("img",{src:"https://admin.transconsolution.net/"+e.image,alt:e.name})},n)})),(0,f.jsxs)("li",{children:[(0,f.jsx)("label",{htmlFor:"myGallery",className:"addGallery",children:(0,f.jsx)(d.Z,{icon:m.q})}),(0,f.jsx)(c.jO,{id:"myGallery",multiple:!0,type:"file",onChange:function(e){var n=e.target.files;if(n.length>0){var t=Array.from(n).map((function(e){var n=new FormData;return n.append("image",e,e.name),n.append("type","image"),fetch("https://admin.transconsolution.net/api/images/add",{method:"POST",body:n,redirect:"follow"}).then((function(e){return e.json()})).catch((function(e){return console.log("error",e),null}))}));Promise.all(t).then((function(e){var n=e.filter((function(e){return null!==e})).map((function(e){return e.data}));console.log(n),S(n)}))}else S([])},name:"myGallery"})]})]}),(0,f.jsx)(c.Jh,{component:"span",id:"exampleFormControlInputHelpInline",children:"Product Thumnails must be 1200px X 12000px and ( 72dpi if possible)"})]}),(0,f.jsx)(c.b7,{lg:12,className:"text-center",children:(0,f.jsx)(c.u5,{color:"primary",className:"py-2 px-5",type:"submit",children:"Submit"})})]})})})})]})}},31110:function(){},76699:function(e,n,t){e.exports=t.p+"static/media/no-img.2efe78cdf6dbf909f571.jpg"}}]);
//# sourceMappingURL=240.614cd3fd.chunk.js.map