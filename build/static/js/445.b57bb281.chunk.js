"use strict";(self.webpackChunk_transcon_admin_react=self.webpackChunk_transcon_admin_react||[]).push([[445],{46445:function(e,n,t){t.r(n);var a=t(93433),r=t(1413),s=t(29439),l=t(17256),i=t(24846),c=t(78983),o=t(72791),u=t(57689),m=t(9085),d=(t(75463),t(80184));n.default=function(){var e=(0,o.useState)([]),n=(0,s.Z)(e,2),t=n[0],h=n[1],p=(0,o.useState)([]),f=(0,s.Z)(p,2),j=f[0],x=f[1],b=(0,o.useState)({}),v=(0,s.Z)(b,2),g=v[0],N=v[1],_=(0,o.useState)({}),S=(0,s.Z)(_,2),Z=S[0],y=S[1],C=(0,o.useState)(1),k=(0,s.Z)(C,2),M=k[0],O=k[1],T=(0,o.useState)(""),I=(0,s.Z)(T,2),P=I[0],A=I[1],E=(0,u.s0)(),L=(0,u.UO)().id;(0,o.useEffect)((function(){fetch("https://admin.transconsolution.net/api/pages/list",{method:"POST",redirect:"follow"}).then((function(e){return e.json()})).then((function(e){return h(e.data)})).catch((function(e){return console.log("error",e)}))}),[]);var w=function(e,n){var t=(0,r.Z)({},g);t[n]=e.target.value,N(t)};return(0,o.useEffect)((function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:L}),redirect:"follow"};fetch("https://admin.transconsolution.net/api/menu/list",e).then((function(e){return e.json()})).then((function(e){x(e.data[0].menu_items),A(e.data[0].menu_name)})).catch((function(e){return console.log("error",e)}))}),[]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(m.Ix,{}),(0,d.jsx)("div",{className:"d-flex justify-content-start  align-items-center  mb-4",children:(0,d.jsx)("h1",{className:"headingType1",children:"Edit Menu"})}),(0,d.jsx)(c.xH,{children:(0,d.jsx)(c.sl,{className:"p-5",children:(0,d.jsxs)(c.rb,{children:[(0,d.jsxs)(c.b7,{lg:12,className:"mb-4",children:[(0,d.jsx)(c.jO,{label:"Enter Menu Name",placeholder:"Enter Menu Name",onChange:function(e){A(e.target.value)},defaultValue:P}),(0,d.jsx)("div",{className:"error"})]}),(0,d.jsxs)(c.b7,{lg:5,children:[(0,d.jsxs)(c.n2,{variant:"tabs",role:"tablist",children:[(0,d.jsx)(c.U6,{role:"presentation",children:(0,d.jsx)(c.AQ,{active:1===M,component:"button",role:"tab","aria-controls":"home-tab-pane","aria-selected":1===M,onClick:function(){return O(1)},children:"Pages"})}),(0,d.jsx)(c.U6,{role:"presentation",children:(0,d.jsx)(c.AQ,{active:2===M,component:"button",role:"tab","aria-controls":"profile-tab-pane","aria-selected":2===M,onClick:function(){return O(2)},children:"Custom Link"})})]}),(0,d.jsxs)(c.gr,{children:[(0,d.jsx)(c.IA,{role:"tabpanel","aria-labelledby":"home-tab-pane",visible:1===M,children:(0,d.jsxs)(c.lx,{onSubmit:function(e){e.preventDefault();var n=!1,r={},l=(0,s.Z)(e.target,3),i=l[0],c=(l[1],l[2]);i.value||(r.page="Please Select page name.",n=!0),y(r);var o=t[parseInt(i.value)],u={name:o.page_name,slug:o.page_slug,target:c.value||""};if(n)return m.Am.error("Please add require fields. "),!1;g.parent?x((function(e){var n=parseInt(g.parent),t=e[n].items;return e[n].items=t?[].concat((0,a.Z)(t),[u]):[u],e})):x((function(e){return[].concat((0,a.Z)(e),[u])})),e.target.reset()},className:"addToMenuBox",children:[(0,d.jsx)(c.LX,{className:"mb-4",label:"Select a Page",name:"page",children:t.map((function(e,n){return(0,d.jsx)("option",{value:n,children:e.page_name},n)}))}),(0,d.jsxs)(c.LX,{className:"mb-4",label:"Select Parent Menu",onChange:function(e){return w(e,"parent")},children:[(0,d.jsx)("option",{}),j.map((function(e,n){return(0,d.jsx)("option",{value:n,children:e.name},n)}))]}),(0,d.jsxs)(c.LX,{className:"mb-4",label:"Select Target",name:"target",children:[(0,d.jsx)("option",{value:""}),(0,d.jsx)("option",{value:"_blank",children:"Open In new tab"})]}),(0,d.jsx)(c.u5,{color:"info",type:"submit",children:"Add to Menu"})]})}),(0,d.jsx)(c.IA,{role:"tabpanel","aria-labelledby":"profile-tab-pane",visible:2===M,children:(0,d.jsxs)(c.lx,{onSubmit:function(e){e.preventDefault();var n=(0,s.Z)(e.target,4),t=n[0],r=n[1],l=n[2],i=n[3],c=!1,o={},u={name:t.value,slug:r.value,target:l.value||""};r.value||(o.custom_url="Url not entered.",c=!0),t.value||(o.custom_menuName="Enter Custom menu name.",c=!0),y(o),c||(i.value?x((function(e){var n=parseInt(g.parent),t=e[n].items;return e[n].items=t?[].concat((0,a.Z)(t),[u]):[u],e})):x((function(e){return[].concat((0,a.Z)(e),[u])})),console.log(u),e.target.reset())},className:"addToMenuBox",children:[(0,d.jsx)(c.jO,{className:"mb-4",label:"Menu Name",name:"custom_menuName"}),(0,d.jsx)("div",{className:"error",children:Z.custom_menuName}),(0,d.jsx)(c.jO,{type:"text",className:"mb-4",label:"Link",name:"custom_url"}),(0,d.jsx)("div",{className:"error",children:Z.custom_url}),(0,d.jsxs)(c.LX,{className:"mb-4",label:"Select Target",name:"custom_target",children:[(0,d.jsx)("option",{value:""}),(0,d.jsx)("option",{value:"_blank",children:"Open In new tab"})]}),(0,d.jsxs)(c.LX,{className:"mb-4",label:"Select Parent Menu",name:"parent",onChange:function(e){return w(e,"parent")},children:[(0,d.jsx)("option",{}),j.map((function(e,n){return(0,d.jsx)("option",{value:n,children:e.name},n)}))]}),(0,d.jsx)(c.u5,{color:"info",type:"submit",children:"Add to Menu"})]})})]})]}),(0,d.jsx)(c.b7,{lg:7,children:(0,d.jsxs)("div",{className:"menu_right_form",children:[(0,d.jsx)("h2",{children:"Menu Tree"}),(0,d.jsx)("div",{className:"menuListWrap",children:(0,d.jsx)("ul",{children:j.map((function(e,n){return(0,d.jsxs)("li",{children:[(0,d.jsxs)("div",{className:"menuOrderingEach",children:[e.name,(0,d.jsx)("div",{className:"trashIcon",onClick:function(){return function(e){x((function(n){return n.splice(e,1),(0,a.Z)(n)}))}(n)},children:(0,d.jsx)(i.Z,{icon:l.N})})]}),e.items&&(0,d.jsx)("ul",{children:null===e||void 0===e?void 0:e.items.map((function(e,t){return(0,d.jsx)("li",{children:(0,d.jsxs)("div",{className:"menuOrderingEach",children:[e.name,(0,d.jsx)("div",{className:"trashIcon",onClick:function(){return function(e,n){x((function(t){return t[e].items.splice(n,1),(0,a.Z)(t)}))}(n,t)},children:(0,d.jsx)(i.Z,{icon:l.N})})]})},t)}))})]},n)}))})})]})}),(0,d.jsx)(c.b7,{lg:12,className:"text-end mt-4",children:(0,d.jsx)(c.u5,{color:"primary",size:"lg",onClick:function(){P||m.Am.error("Please enter menu name.");var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:L,menu_name:P,menu_items:j}),redirect:"follow"};fetch("https://admin.transconsolution.net/api/menu/update",e).then((function(e){return e.json()})).then((function(e){console.log(e),200==e.status&&(m.Am.success("Menu added"),setTimeout((function(){E("/menu")}),300))})).catch((function(e){return console.log("error",e)}))},children:"Save Menu"})})]})})})]})}},75463:function(){}}]);
//# sourceMappingURL=445.b57bb281.chunk.js.map